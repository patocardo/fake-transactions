<!DOCTYPE html>
<html lang="en" class="h-100">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />

  <title>Transactions Challenge</title>

  <!--Fontawesome-->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
    integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link
    href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
    rel="stylesheet">

  <!--BootstrapCSS-->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <link rel="stylesheet" href="./css/main.css">

  <!--Jquery, Popper, BootstrapJS -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js" 
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" 
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
    integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
    integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
    crossorigin="anonymous"></script>

  <!-- Moment Datepicker-->
  <script src="luxon.js"></script>
  
  <script src="/js/ui-utils.js"></script>
  <script src="/js/polyfills.js"></script>
  <script src="/js/logout.js"></script>
  <script src="/js/error-handling.js"></script>
</head>

<body class="d-flex flex-column h-100">
  <main>
    <%- body %>
  </main>
  <footer class="footer mt-auto py-3" style="background-color: #eee;">
    <div class="container text-right">
      <span class="text-muted">Code challenge for Fullstack dev at AgileEngine &copy;Patricio Card√≥</span>
    </div>
  </footer>
  <script type="text/javascript" src="/js/toast.js"></script> 
  <script type="text/javascript" src="/js/main.js"></script> 
  <script type="text/javascript">
    $(function() {
      var user = null;
      $('#loginForm').on('submit', function() {
        $.ajax({
          url: '/auth/login',
          method: 'post',
          data: {
            name: $('name').val()
          }
        }).then(function(resp) {
          user = $('name').val();
          $('#inside').show();
          $('#outside').hide();
          insider(user);
        }).catch(function(err) {
          toastResult('error', err.message);
        })
      });
      $('#logout').on('click', function() {
        user = null;
        $('#inside').hide();
        $('#outside').show();
      })
    })
  </script>
</body>
</html>
